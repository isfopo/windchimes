(this.webpackJsonpwindchimes=this.webpackJsonpwindchimes||[]).push([[0],{38:function(e,t,n){},46:function(e,t,n){e.exports=n(60)},51:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(15),o=n.n(r),u=(n(51),n(3)),i=n(16),l=n(43),m=n(17),s=n(28),h=n(62),b=n(23),f=n.n(b),d=Object(i.a)({button:{color:function(e){return e.theme.background2},backgroundColor:function(e){return e.theme.foreground},borderColor:function(e){return e.theme.background2}},display:{color:function(e){return e.theme.background2}}}),g=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],j=function(e){var t=Object(a.useState)(e.theme),n=Object(u.a)(t,2),r=n[0],o=n[1],i=d({theme:r});return Object(a.useEffect)((function(){o(e.theme)}),[e.theme]),c.a.createElement("div",{className:"noteMenu"},c.a.createElement("div",{className:"noteButtons"},g.map((function(t,n){return c.a.createElement("button",{className:i.button,key:n,onClick:function(){e.addChime("".concat(t))}},t)}))),c.a.createElement("div",{className:"octaveMenu"},c.a.createElement("div",{className:"octaveButtons"},c.a.createElement("button",{className:i.button,onClick:function(){e.changeOctave(1)}},"+"),c.a.createElement("button",{className:i.button,onClick:function(){e.changeOctave(-1)}},"-")),c.a.createElement("p",{className:"".concat(i.display," octaveDisplay")},c.a.createElement("strong",null,"C",e.octave," - B",e.octave))))},O=n(13),E=n(61),v=n(40),p={Major:["C4","D4","E4","F4","G4","A4","B4"],Minor:["C4","D4","Eb4","F4","G4","Ab4","Bb4"],"Major Pentatonic":["C4","D4","E4","G4","A4"],"Minor Pentatonic":["C4","Eb4","F4","G4","Bb4"],"Major Seventh":["C4","E4","G4","B4"],"Minor Seventh":["C4","Eb4","F4","Bb4"],"Javanese Pelog":["D4","Eb4","F4","Ab4","A4","Bb4","C4"]},C=function(e){var t=Object(E.a)(["userScales"]),n=Object(u.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)(Object(O.a)({},p,{},r.userScales)),l=Object(u.a)(i,1)[0],m=Object(a.useState)([]),h=Object(u.a)(m,2),b=h[0],f=h[1];return Object(a.useEffect)((function(){f(Object.keys(l).map((function(e){return{value:e,label:e}})))}),[l]),c.a.createElement("div",{className:"scalesMenu menu"},c.a.createElement(v.a,{options:b,onChange:function(t){t.value&&e.setScale(l[t.value])},onCreateOption:function(t){t&&(l[t]=Object(s.a)(e.chimeNotes),f(Object.keys(l).map((function(e){return{value:e,label:e}}))),o("userScales",l))},placeholder:"Choose scale here...",theme:function(t){return Object(O.a)({},t,{colors:Object(O.a)({},t.colors,{neutral0:e.theme.highlight1,primary25:e.theme.highlight2,primary:e.theme.foreground})})}}))},k=n(41),y=function(e){var t=Object(a.useState)(!0),n=Object(u.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)([{value:"metal",label:"Metal"},{value:"kalimba",label:"Kalimba"},{value:"fade",label:"Fade"},{value:"wood",label:"Wood"},{value:"synth",label:"Synth"}]),l=Object(u.a)(i,1)[0];return Object(a.useEffect)((function(){e.chimeNotes.length>0?o(!1):o(!0)}),[e.chimeNotes]),c.a.createElement("div",{className:"materialMenu menu"},c.a.createElement(k.a,{options:l,placeholder:r?"Choose material here...":"Metal",onChange:function(t){e.changeMaterial(t.value)},isDisabled:r,theme:function(t){return Object(O.a)({},t,{colors:Object(O.a)({},t.colors,{neutral0:e.theme.highlight1,neutral5:e.theme.highlight1,primary25:e.theme.highlight2,primary:e.theme.foreground})})}}))},w={metal:{highlight1:"#DAE1DC",highlight2:"#B5CCEB",foreground:"#38BCA8",background1:"#9AD2CB",background2:"#2B3134"},kalimba:{highlight1:"#C3BFBF",highlight2:"#D2B278",foreground:"#D56C33",background1:"#77925F",background2:"#003348"},fade:{highlight1:"#FCDDC5",highlight2:"#DACBC1",foreground:"#2F90A8",background1:"#0A2553",background2:"#181B28"},wood:{highlight1:"#ECB069",highlight2:"#B74B25",foreground:"#8F432B",background1:"#763C2C",background2:"#431811"},synth:{highlight1:"#55e7ff",highlight2:"#00ccfd",foreground:"#ff34b3",background1:"#2011a2",background2:"#201148"}},S=Object(i.a)({wrapper:{text:function(e){return e.theme.background2},background:function(e){return e.theme.foreground},borderColor:function(e){return e.theme.background2}}}),B=function(e){var t=Object(a.useState)(w[e.material]),n=Object(u.a)(t,2),r=n[0],o=n[1],i=S({theme:r});return Object(a.useEffect)((function(){o(w[e.material])}),[e.material]),c.a.createElement("div",{className:"".concat(i.wrapper," instructions")},c.a.createElement("p",null,"Select a note to add a chime"),c.a.createElement("p",null,'Change octave by pressing "+" and "-"'),c.a.createElement("p",null,"Double-click on a chime to remove it"),c.a.createElement("p",null,"Select a scale or save your own"),c.a.createElement("p",null,"Change the material to change the sound"))},N=function(e){var t=Object(a.useState)(100),n=Object(u.a)(t,1)[0],r=Object(a.useState)(100),o=Object(u.a)(r,1)[0],i=Object(a.useState)(6),l=Object(u.a)(i,1)[0],m=Object(a.useState)(4*l),s=Object(u.a)(m,1)[0];return c.a.createElement("div",{className:"bracket"},c.a.createElement("svg",{width:"".concat(o,"%"),height:n},c.a.createElement("line",{x1:"".concat(o/2-l/5,"%"),x2:"".concat(o/2-l/5,"%"),y1:"0",y2:"100",stroke:e.theme.background2,strokeWidth:"".concat(l,"%")}),c.a.createElement("rect",{width:"".concat(o,"%"),height:"".concat(s,"%"),x:"0",y:"".concat(n-s,"%"),rx:"10",ry:"10",stroke:"transparent",fill:e.theme.background2})))},x=n(42),M=(n(38),function(e,t,n){var a=Object(u.a)(t,2),c=a[0],r=a[1],o=Object(u.a)(n,2),i=o[0];return(e-c)/(r-c)*(o[1]-i)+i}),D=function(e){var t=Object(a.useState)(f.a.Frequency(e.note).toMidi()),n=Object(u.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)(M(r,[36,95],[400,180])),l=Object(u.a)(i,2),m=l[0],s=l[1],h=Object(a.useState)(12-e.numChimes),b=Object(u.a)(h,2),d=b[0],g=b[1],j=Object(a.useState)(150),O=Object(u.a)(j,1)[0];return Object(a.useEffect)((function(){g(12-e.numChimes)}),[e.numChimes]),Object(a.useEffect)((function(){o(f.a.Frequency(e.note).toMidi()),s(M(r,[36,95],[400,180]))}),[r,e.note]),c.a.createElement("div",null,c.a.createElement("svg",{width:"100%",height:m+d+O},c.a.createElement("rect",{width:"90%",height:m,x:d/2,y:O-50,rx:"25",ry:"25",fill:e.theme.foreground,stroke:e.theme.background2,strokeWidth:d}),c.a.createElement("rect",{width:"30%",height:m/1-O,x:"55%",y:O,rx:"50",ry:"50",fill:e.theme.highlight1,stroke:"transparent"}),c.a.createElement("line",{x1:"45%",x2:"45%",y1:"0",y2:O,stroke:e.theme.background2,strokeWidth:1.5*d}),c.a.createElement("circle",{cx:"45%",cy:O,r:1.5*d,stroke:"transparent",fill:e.theme.background2}),c.a.createElement("rect",{width:"50",height:"40",x:e.numChimes<=4?6:10-e.numChimes,y:"10",rx:"10",ry:"10",fill:e.theme.foreground,stroke:e.theme.background2,strokeWidth:d/1.75}),c.a.createElement("text",{x:e.numChimes<=4?14:18-e.numChimes,y:"35",fontWeight:"bold",fontSize:e.numChimes<=6?18:24-e.numChimes,fill:e.theme.background2}," ",e.note," ")))},A=function(e){var t=new RegExp("([0-9]+)|([a-zA-Z]+)","g");return e.match(t)},F=function(e){var t=Object(a.useRef)(!0),n=Object(a.useRef)(!1),r=Object(a.useRef)(!0),o=Object(a.useState)(!1),i=Object(u.a)(o,2),l=i[0],m=i[1],s=Object(a.useState)(A(e.note)[0]),h=Object(u.a)(s,2),b=h[0],f=h[1],d=Object(a.useState)(A(e.note)[1]),g=Object(u.a)(d,2),j=g[0],O=g[1],E=function(){e.isLoaded.current&&(m(!0),setTimeout((function(){m(!1)}),100),e.playChime("".concat(b).concat(j)),r.current&&(v(),r.current=!1))},v=function t(){var a;n.current=setTimeout((function(){E(),t()}),(a=e.windspeed,Math.floor(1e4*Math.random()-400*a)+100))};return Object(a.useEffect)((function(){f(A(e.note)[0]),O(A(e.note)[1]),clearTimeout(n.current),r.current=!0}),[e.note,b,j]),Object(a.useEffect)((function(){return function(){clearTimeout(n.current),t.current=!1}}),[]),c.a.createElement("div",{className:"chime",onPointerEnter:function(){E()},onDoubleClick:function(){e.removeChime("".concat(b).concat(j))}},c.a.createElement(x.a,{scaleX:l?1.1:1,scaleY:l?1.1:1,tension:300,friction:50},c.a.createElement("div",null,c.a.createElement(D,{note:"".concat(b).concat(j),numChimes:e.numChimes,theme:e.theme}))))},R={C4:"chimeC.mp3"},W=function(e){var t=function(){var e=Object(a.useState)({}),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),o=Object(u.a)(r,2),i=o[0],l=o[1],m=function(e){var t=e.coords;c({latitude:t.latitude,longitude:t.longitude})},s=function(e){l(e.message)};return Object(a.useEffect)((function(){var e=navigator.geolocation;if(e){var t=e.watchPosition(m,s);return function(){return e.clearWatch(t)}}l("Geolocation is not supported")}),[]),Object(O.a)({},n,{error:i})}(),n=t.latitude,r=t.longitude,o=Object(a.useRef)(!1),i=Object(a.useState)(e.match.params.notes?e.match.params.notes.split(",").filter((function(e){return"windchimes"!==e})):[]),l=Object(u.a)(i,2),m=l[0],f=l[1],d=Object(a.useState)("metal"),g=Object(u.a)(d,2),E=g[0],v=g[1],p=Object(a.useState)(0),k=Object(u.a)(p,2),w=k[0],S=k[1],x=Object(a.useState)(4),M=Object(u.a)(x,2),D=M[0],A=M[1],W=Object(a.useRef)(null),G=Object(a.useContext)(I);Object(a.useEffect)((function(){P("metal")}),[]),Object(a.useEffect)((function(){n&&r&&T(n,r)}),[n,r]),function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){T(n,r)}),6e4);var P=function(e){o.current=!1,W.current=new b.Sampler(R,{baseUrl:"./sounds/".concat(e,"/"),onload:function(){o.current=!0}}).toMaster(),v(e),G(e)},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-38.2527,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:85.7585;fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(e,"&lon=").concat(t,"&appid=").concat("e7ec64ad75c8f58f1a1726bf7dc6c716")).then((function(e){return e.json()})).then((function(e){S(e.wind.speed)})).catch((function(e){console.error(e)}))},J=function(e){W.current.triggerAttackRelease(e,10)};Object(a.useEffect)((function(){e.history.push("".concat(m.toString(",")))}),[E,m,e.history]);var q=function(e){f(m.filter((function(t){return t!==e})))};return c.a.createElement("div",{className:"app"},c.a.createElement("div",{className:"controls"},c.a.createElement("div",{className:"dropdowns"},c.a.createElement(h.a,null,c.a.createElement(C,{setScale:function(e){f(e)},chimeNotes:m,theme:e.theme})),c.a.createElement(y,{changeMaterial:P,chimeNotes:m,theme:e.theme})),c.a.createElement("br",null),c.a.createElement(j,{className:"noteMenu",addChime:function(e){m.length<=8&&f([].concat(Object(s.a)(m),["".concat(e).concat(D)]))},changeOctave:function(e){var t=D+e;t>=2&&t<=6&&A(t)},octave:D,theme:e.theme})),0===m.length?c.a.createElement(B,{material:E}):c.a.createElement("div",{className:"instrument"},c.a.createElement(N,{theme:e.theme}),c.a.createElement("div",{className:"chimes"},m.map((function(t,n){return c.a.createElement(F,{key:n,note:t,windspeed:w,numChimes:m.length,playChime:J,removeChime:q,isLoaded:o,theme:e.theme})})))))},G=Object(i.a)({wrapper:{background:function(e){return e.theme.highlight1},borderRadius:"3%"}}),P=function(e){var t=Object(a.useState)(e.theme),n=Object(u.a)(t,2),r=n[0],o=n[1],i=G({theme:r});return Object(a.useEffect)((function(){o(e.theme)}),[e.theme]),c.a.createElement("div",{className:"".concat(i.wrapper," App")},c.a.createElement(l.a,null,c.a.createElement("div",{className:"chime-wrapper"},c.a.createElement(m.a,{exact:!0,path:"/windchimes",render:function(e){return c.a.createElement(W,Object.assign({theme:r},e))}}),c.a.createElement(m.a,{path:"/windchimes/:notes",render:function(e){return c.a.createElement(W,Object.assign({theme:r},e))}}))))},T=Object(i.a)({wrapper:{text:function(e){return e.theme.background2},background:function(e){return e.theme.background2},borderColor:function(e){return e.theme.foreground},width:"100%"}}),I=c.a.createContext(void 0);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement((function(){var e=Object(a.useState)(w.metal),t=Object(u.a)(e,2),n=t[0],r=t[1],o=T({theme:n}),i=function(e){r(w[e])};return Object(a.useEffect)((function(){document.body.style.background=n.background2}),[n]),c.a.createElement(I.Provider,{value:i},c.a.createElement("div",{className:o.wrapper},c.a.createElement(P,{theme:n,changeTheme:i})))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[46,1,2]]]);
//# sourceMappingURL=main.d9a5ad12.chunk.js.map