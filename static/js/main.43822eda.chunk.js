(this.webpackJsonpwindchimes=this.webpackJsonpwindchimes||[]).push([[0],{38:function(e,t,n){},46:function(e,t,n){e.exports=n(60)},51:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(15),o=n.n(r),i=(n(51),n(3)),u=n(16),l=n(43),s=n(17),h=n(28),m=n(62),f=n(23),b=n.n(f),d=Object(u.a)({button:{color:function(e){return e.theme.background2},backgroundColor:function(e){return e.theme.foreground},borderColor:function(e){return e.theme.background2}},display:{color:function(e){return e.theme.background2}}}),g=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],v=function(e){var t=Object(a.useState)(e.theme),n=Object(i.a)(t,2),r=n[0],o=n[1],u=d({theme:r});return Object(a.useEffect)((function(){o(e.theme)}),[e.theme]),c.a.createElement("div",{className:"noteMenu"},c.a.createElement("div",{className:"noteButtons"},g.map((function(t,n){return c.a.createElement("button",{className:u.button,key:n,onClick:function(){e.addChime("".concat(t))}},t)}))),c.a.createElement("div",{className:"octaveMenu"},c.a.createElement("div",{className:"octaveButtons"},c.a.createElement("button",{className:u.button,onClick:function(){e.changeOctave(1)}},"+"),c.a.createElement("button",{className:u.button,onClick:function(){e.changeOctave(-1)}},"-")),c.a.createElement("p",{className:"".concat(u.display," octaveDisplay")},c.a.createElement("strong",null,"C",e.octave," - B",e.octave))))},j=n(13),O=n(61),E=n(40),p={Major:["C4","D4","E4","F4","G4","A4","B4"],Minor:["C4","D4","Eb4","F4","G4","Ab4","Bb4"],"Major Pentatonic":["C4","D4","E4","G4","A4"],"Minor Pentatonic":["C4","Eb4","F4","G4","Bb4"],"Major Seventh":["C4","E4","G4","B4"],"Minor Seventh":["C4","Eb4","F4","Bb4"],"Javanese Pelog":["D4","Eb4","F4","Ab4","A4","Bb4","C4"]},k=function(e){var t=Object(O.a)(["userScales"]),n=Object(i.a)(t,2),r=n[0],o=n[1],u=Object(a.useState)(Object(j.a)({},p,{},r.userScales)),l=Object(i.a)(u,1)[0],s=Object(a.useState)([]),m=Object(i.a)(s,2),f=m[0],b=m[1];return Object(a.useEffect)((function(){b(Object.keys(l).map((function(e){return{value:e,label:e}})))}),[l]),c.a.createElement("div",{className:"scalesMenu menu"},c.a.createElement(E.a,{options:f,onChange:function(t){t.value&&e.setScale(l[t.value])},onCreateOption:function(t){t&&(l[t]=Object(h.a)(e.chimeNotes),b(Object.keys(l).map((function(e){return{value:e,label:e}}))),o("userScales",l))},placeholder:"Choose scale here...",theme:function(t){return Object(j.a)({},t,{colors:Object(j.a)({},t.colors,{neutral0:e.theme.highlight1,primary25:e.theme.highlight2,primary:e.theme.foreground})})}}))},C=n(41),w=function(e){var t=Object(a.useState)(!0),n=Object(i.a)(t,2),r=n[0],o=n[1],u=Object(a.useState)([{value:"metal",label:"Metal"},{value:"kalimba",label:"Kalimba"},{value:"fade",label:"Fade"},{value:"wood",label:"Wood"},{value:"synth",label:"Synth"}]),l=Object(i.a)(u,1)[0];return Object(a.useEffect)((function(){e.chimeNotes.length>0?o(!1):o(!0)}),[e.chimeNotes]),c.a.createElement("div",{className:"materialMenu menu"},c.a.createElement(C.a,{options:l,placeholder:r?"Choose material here...":"Metal",onChange:function(t){e.changeMaterial(t.value)},isDisabled:r,theme:function(t){return Object(j.a)({},t,{colors:Object(j.a)({},t.colors,{neutral0:e.theme.highlight1,neutral5:e.theme.highlight1,primary25:e.theme.highlight2,primary:e.theme.foreground})})}}))},y={metal:{highlight1:"#DAE1DC",highlight2:"#B5CCEB",foreground:"#38BCA8",background1:"#9AD2CB",background2:"#2B3134"},kalimba:{highlight1:"#C3BFBF",highlight2:"#D2B278",foreground:"#D56C33",background1:"#77925F",background2:"#003348"},fade:{highlight1:"#FCDDC5",highlight2:"#DACBC1",foreground:"#2F90A8",background1:"#0A2553",background2:"#181B28"},wood:{highlight1:"#ECB069",highlight2:"#B74B25",foreground:"#8F432B",background1:"#763C2C",background2:"#431811"},synth:{highlight1:"#55e7ff",highlight2:"#00ccfd",foreground:"#ff34b3",background1:"#2011a2",background2:"#201148"}},S=Object(u.a)({wrapper:{text:function(e){return e.theme.background2},background:function(e){return e.theme.foreground},borderColor:function(e){return e.theme.background2}}}),N=function(e){var t=Object(a.useState)(y[e.material]),n=Object(i.a)(t,2),r=n[0],o=n[1],u=S({theme:r});return Object(a.useEffect)((function(){o(y[e.material])}),[e.material]),c.a.createElement("div",{className:"".concat(u.wrapper," instructions")},c.a.createElement("p",null,"Select a note to add a chime"),c.a.createElement("p",null,'Change octave by pressing "+" and "-"'),c.a.createElement("p",null,"Double-click on a chime to remove it"),c.a.createElement("p",null,"Select a scale or save your own"),c.a.createElement("p",null,"Change the material to change the sound"))},B=function(e){var t=Object(a.useState)(100),n=Object(i.a)(t,1)[0],r=Object(a.useState)(100),o=Object(i.a)(r,1)[0],u=Object(a.useState)(6),l=Object(i.a)(u,1)[0],s=Object(a.useState)(4*l),h=Object(i.a)(s,1)[0];return c.a.createElement("div",{className:"bracket"},c.a.createElement("svg",{width:"".concat(o,"%"),height:n},c.a.createElement("line",{x1:"".concat(o/2-l/5,"%"),x2:"".concat(o/2-l/5,"%"),y1:"0",y2:"100",stroke:e.theme.background2,strokeWidth:"".concat(l,"%")}),c.a.createElement("rect",{width:"".concat(o,"%"),height:"".concat(h,"%"),x:"0",y:"".concat(n-h,"%"),rx:"10",ry:"10",stroke:"transparent",fill:e.theme.background2})))},x=n(42),A=(n(38),function(e,t,n){var a=Object(i.a)(t,2),c=a[0],r=a[1],o=Object(i.a)(n,2),u=o[0];return(e-c)/(r-c)*(o[1]-u)+u}),M=function(e){var t=Object(a.useState)(b.a.Frequency(e.note).toMidi()),n=Object(i.a)(t,2),r=n[0],o=n[1],u=Object(a.useState)(A(r,[36,95],[400,180])),l=Object(i.a)(u,2),s=l[0],h=l[1],m=Object(a.useState)(12-e.numChimes),f=Object(i.a)(m,2),d=f[0],g=f[1],v=Object(a.useState)(150),j=Object(i.a)(v,1)[0];return Object(a.useEffect)((function(){g(12-e.numChimes)}),[e.numChimes]),Object(a.useEffect)((function(){o(b.a.Frequency(e.note).toMidi()),h(A(r,[36,95],[400,180]))}),[r,e.note]),c.a.createElement("div",null,c.a.createElement("svg",{width:"100%",height:s+d+j},c.a.createElement("rect",{width:"90%",height:s,x:d/2,y:j-50,rx:"25",ry:"25",fill:e.theme.foreground,stroke:e.theme.background2,strokeWidth:d}),c.a.createElement("rect",{width:"30%",height:s/1-j,x:"55%",y:j,rx:"50",ry:"50",fill:e.theme.highlight1,stroke:"transparent"}),c.a.createElement("line",{x1:"45%",x2:"45%",y1:"0",y2:j,stroke:e.theme.background2,strokeWidth:1.5*d}),c.a.createElement("circle",{cx:"45%",cy:j,r:1.5*d,stroke:"transparent",fill:e.theme.background2}),c.a.createElement("rect",{width:"50",height:"40",x:e.numChimes<=4?6:10-e.numChimes,y:"10",rx:"10",ry:"10",fill:e.theme.foreground,stroke:e.theme.background2,strokeWidth:d/1.75}),c.a.createElement("text",{x:e.numChimes<=4?14:18-e.numChimes,y:"35",fontWeight:"bold",fontSize:e.numChimes<=6?18:24-e.numChimes,fill:e.theme.background2}," ",e.note," ")))},D=function(e){var t=new RegExp("([0-9]+)|([a-zA-Z]+)","g");return e.match(t)},F=function(e){var t=Object(a.useRef)(!0),n=Object(a.useRef)(!1),r=Object(a.useRef)(!0),o=Object(a.useState)(!1),u=Object(i.a)(o,2),l=u[0],s=u[1],h=Object(a.useState)(D(e.note)[0]),m=Object(i.a)(h,2),f=m[0],b=m[1],d=Object(a.useState)(D(e.note)[1]),g=Object(i.a)(d,2),v=g[0],j=g[1],O=function(){e.isLoaded.current&&(s(!0),setTimeout((function(){s(!1)}),100),e.playChime("".concat(f).concat(v)),r.current&&(E(),r.current=!1))},E=function t(){var a;n.current=setTimeout((function(){O(),t()}),(a=e.windspeed,Math.floor(1e4*Math.random()-400*a)+100))};return Object(a.useEffect)((function(){b(D(e.note)[0]),j(D(e.note)[1]),clearTimeout(n.current),r.current=!0}),[e.note,f,v]),Object(a.useEffect)((function(){return function(){clearTimeout(n.current),t.current=!1}}),[]),c.a.createElement("div",{className:"chime",onPointerEnter:function(){O()},onDoubleClick:function(){e.removeChime("".concat(f).concat(v))}},c.a.createElement(x.a,{scaleX:l?1.1:1,scaleY:l?1.1:1,tension:300,friction:50},c.a.createElement("div",null,c.a.createElement(M,{note:"".concat(f).concat(v),numChimes:e.numChimes,theme:e.theme}))))},W="e7ec64ad75c8f58f1a1726bf7dc6c716",R={C4:"chimeC.mp3"},G=function(e){var t=function(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),o=Object(i.a)(r,2),u=o[0],l=o[1],s=function(e){var t=e.coords;c({latitude:t.latitude,longitude:t.longitude})},h=function(e){l(e.message)};return Object(a.useEffect)((function(){var e=navigator.geolocation;if(e){var t=e.watchPosition(s,h);return function(){return e.clearWatch(t)}}l("Geolocation is not supported")}),[]),Object(j.a)({},n,{error:u})}(),n=t.latitude,r=t.longitude,o=Object(a.useRef)(!1),u=Object(a.useState)(e.match.params.notes?e.match.params.notes.split(","):[]),l=Object(i.a)(u,2),s=l[0],b=l[1],d=Object(a.useState)("metal"),g=Object(i.a)(d,2),O=g[0],E=g[1],p=Object(a.useState)(0),C=Object(i.a)(p,2),y=C[0],S=C[1],x=Object(a.useState)(4),A=Object(i.a)(x,2),M=A[0],D=A[1],G=Object(a.useRef)(null),P=Object(a.useContext)(U);Object(a.useEffect)((function(){T("metal")}),[]),Object(a.useEffect)((function(){n&&r&&L(n,r)}),[n,r]),function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){L(n,r)}),6e4);var T=function(e){o.current=!1,G.current=new f.Sampler(R,{baseUrl:"./sounds/".concat(e,"/"),onload:function(){o.current=!0}}).toMaster(),E(e),P(e)},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-38.2527,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:85.7585;fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(e,"&lon=").concat(t,"&appid=").concat(W)).then((function(e){return e.json()})).then((function(e){S(e.wind.speed)})).catch((function(e){console.error(e)}))},I=function(e){G.current.triggerAttackRelease(e,10)};Object(a.useEffect)((function(){e.history.push("".concat(s.toString(",")))}),[O,s,e.history]);var J=function(e){b(s.filter((function(t){return t!==e})))};return c.a.createElement("div",{className:"app"},c.a.createElement("div",{className:"controls"},c.a.createElement("div",{className:"dropdowns"},c.a.createElement(m.a,null,c.a.createElement(k,{setScale:function(e){b(e)},chimeNotes:s,theme:e.theme})),c.a.createElement(w,{changeMaterial:T,chimeNotes:s,theme:e.theme})),c.a.createElement("br",null),c.a.createElement(v,{className:"noteMenu",addChime:function(e){s.length<=8&&b([].concat(Object(h.a)(s),["".concat(e).concat(M)]))},changeOctave:function(e){var t=M+e;t>=2&&t<=6&&D(t)},octave:M,theme:e.theme})),0===s.length?c.a.createElement(N,{material:O}):c.a.createElement("div",{className:"instrument"},c.a.createElement(B,{theme:e.theme}),c.a.createElement("div",{className:"chimes"},s.map((function(t,n){return c.a.createElement(F,{key:n,note:t,windspeed:y,numChimes:s.length,playChime:I,removeChime:J,isLoaded:o,theme:e.theme})})))))},P=Object(u.a)({wrapper:{background:function(e){return e.theme.highlight1},borderRadius:"3%"}}),T=function(e){var t=Object(a.useState)(e.theme),n=Object(i.a)(t,2),r=n[0],o=n[1],u=P({theme:r});return Object(a.useEffect)((function(){o(e.theme)}),[e.theme]),c.a.createElement("div",{className:"".concat(u.wrapper," App")},c.a.createElement(l.a,{basename:"/windchimes"},c.a.createElement("div",{className:"chime-wrapper"},c.a.createElement(s.a,{exact:!0,path:"/",render:function(e){return c.a.createElement(G,Object.assign({theme:r},e))}}),c.a.createElement(s.a,{path:"/:notes",render:function(e){return c.a.createElement(G,Object.assign({theme:r},e))}}))))},L=Object(u.a)({wrapper:{text:function(e){return e.theme.background2},background:function(e){return e.theme.background2},borderColor:function(e){return e.theme.foreground},width:"100%"}}),U=c.a.createContext(void 0),I=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(c.a.createElement((function(){var e=Object(a.useState)(y.metal),t=Object(i.a)(e,2),n=t[0],r=t[1],o=L({theme:n}),u=function(e){r(y[e])};return Object(a.useEffect)((function(){document.body.style.background=n.background2}),[n]),c.a.createElement(U.Provider,{value:u},c.a.createElement("div",{className:o.wrapper},c.a.createElement(T,{theme:n,changeTheme:u})))}),null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/windchimes",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/windchimes","/service-worker.js");I?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):J(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):J(t,e)}))}}()}},[[46,1,2]]]);
//# sourceMappingURL=main.43822eda.chunk.js.map